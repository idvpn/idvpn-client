(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("oidc-client")):"function"===typeof define&&define.amd?define(["oidc-client"],t):"object"===typeof exports?exports["idvpn"]=t(require("oidc-client")):e["idvpn"]=t(e["Oidc"])})("undefined"!==typeof self?self:this,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({ba10:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function c(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function u(e,t,n,r,i){if("function"!==typeof n)throw new TypeError("The listener must be a function");var u=new c(n,r||e,i),s=o?o+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],u]:e._events[s].push(u):(e._events[s]=u,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=o?o+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,c=new Array(i);r<i;r++)c[r]=n[r].fn;return c},l.prototype.listenerCount=function(e){var t=o?o+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,i,c){var u=o?o+e:e;if(!this._events[u])return!1;var s,l,a=this._events[u],f=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),f){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,t),!0;case 3:return a.fn.call(a.context,t,n),!0;case 4:return a.fn.call(a.context,t,n,r),!0;case 5:return a.fn.call(a.context,t,n,r,i),!0;case 6:return a.fn.call(a.context,t,n,r,i,c),!0}for(l=1,s=new Array(f-1);l<f;l++)s[l-1]=arguments[l];a.fn.apply(a.context,s)}else{var p,d=a.length;for(l=0;l<d;l++)switch(a[l].once&&this.removeListener(e,a[l].fn,void 0,!0),f){case 1:a[l].fn.call(a[l].context);break;case 2:a[l].fn.call(a[l].context,t);break;case 3:a[l].fn.call(a[l].context,t,n);break;case 4:a[l].fn.call(a[l].context,t,n,r);break;default:if(!s)for(p=1,s=new Array(f-1);p<f;p++)s[p-1]=arguments[p];a[l].fn.apply(a[l].context,s)}}return!0},l.prototype.on=function(e,t,n){return u(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return u(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var i=o?o+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==t||r&&!c.once||n&&c.context!==n||s(this,i);else{for(var u=0,l=[],a=c.length;u<a;u++)(c[u].fn!==t||r&&!c[u].once||n&&c[u].context!==n)&&l.push(c[u]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=o,l.EventEmitter=l,e.exports=l},c097:function(t,n){t.exports=e},f6fd:function(e,t){(function(e){var t="currentScript",n=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(r){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(e in n)if(n[e].src==t||"interactive"==n[e].readyState)return n[e];return null}}})})(document)},fb15:function(e,t,n){"use strict";var r;(n.r(t),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=r[1]));var o=n("ba10"),i=n("c097");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var v=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,t),e=a(this,p(t).call(this)),e.options=r,e._client=new i.UserManager(Object.assign({userStore:new i.WebStorageStateStore,loadUserInfo:!0},n)),e._client.events.addUserLoaded(function(t){return e.emit("userLoaded",t)}),e._client.events.addUserUnloaded(function(){return e.emit("userUnloaded")}),e._client.events.addSilentRenewError(function(t){return e.emit("renewalError",t)}),e._client.events.addUserSignedOut(function(){return e.emit("userLoggedOut")}),e._client.events.addUserSessionChanged(function(t){return e.emit("sessionChanged",t)}),e}return d(t,e),l(t,[{key:"login",value:function(){return this.options.popup?this._client.signinPopup():this._client.signinRedirect()}},{key:"handleLoginCallback",value:function(){return this.options.popup?this._client.signinPopupCallback():this._client.signinRedirectCallback()}},{key:"logout",value:function(e){return this.options.popup?this._client.signoutPopup(e):this._client.signoutRedirect(e)}},{key:"handleLogoutCallback",value:function(){return this.options.popup?this._client.signoutPopupCallback():this._client.signoutRedirectCallback()}},{key:"loginSilentCallback",value:function(){return this._client.signinSilentCallback()}},{key:"querySessionStatus",value:function(){return this._client.querySessionStatus()}},{key:"getUser",value:function(){return this._client.getUser()}},{key:"silentSignin",value:function(){return this._client.silentSignin()}}]),t}(o),y="idvpn-login-button",b={minWidth:"100px",color:"white",background:"#1976d2",textTransform:"uppercase",textDecoration:"none",display:"inline-block",padding:"7px",borderRadius:"2px",border:"none"},g=function(e,t){var n=document.createElement("BUTTON");for(var r in n.id=y,b)n.style[r]=b[r];n.addEventListener("click",function(){e?t.logout():t.login()});var o=document.createTextNode(e?"Logout":"IdVPN Login");return n.appendChild(o),n},_=function(e,t,n){for(var r=g(t,n),o=0;o<e.children.length;o++){var i=e.children[o];if(i.id===y)return e.replaceChild(r,i),r}return e.appendChild(r),r},m={Client:v,appendButton:_};t["default"]=m}})["default"]});
//# sourceMappingURL=idvpn.umd.min.js.map
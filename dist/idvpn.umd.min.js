(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("oidc-client")):"function"===typeof define&&define.amd?define(["oidc-client"],t):"object"===typeof exports?exports["idvpn"]=t(require("oidc-client")):e["idvpn"]=t(e["Oidc"])})("undefined"!==typeof self?self:this,function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({ba10:function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function i(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function c(e,t,n,o,i){if("function"!==typeof n)throw new TypeError("The listener must be a function");var c=new s(n,o||e,i),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],c]:e._events[u].push(c):(e._events[u]=c,e._eventsCount++),e}function u(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s},l.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,o,i,s){var c=r?r+e:e;if(!this._events[c])return!1;var u,l,a=this._events[c],f=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),f){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,t),!0;case 3:return a.fn.call(a.context,t,n),!0;case 4:return a.fn.call(a.context,t,n,o),!0;case 5:return a.fn.call(a.context,t,n,o,i),!0;case 6:return a.fn.call(a.context,t,n,o,i,s),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];a.fn.apply(a.context,u)}else{var d,p=a.length;for(l=0;l<p;l++)switch(a[l].once&&this.removeListener(e,a[l].fn,void 0,!0),f){case 1:a[l].fn.call(a[l].context);break;case 2:a[l].fn.call(a[l].context,t);break;case 3:a[l].fn.call(a[l].context,t,n);break;case 4:a[l].fn.call(a[l].context,t,n,o);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];a[l].fn.apply(a[l].context,u)}}return!0},l.prototype.on=function(e,t,n){return c(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return c(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return u(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||n&&s.context!==n||u(this,i);else{for(var c=0,l=[],a=s.length;c<a;c++)(s[c].fn!==t||o&&!s[c].once||n&&s[c].context!==n)&&l.push(s[c]);l.length?this._events[i]=1===l.length?l[0]:l:u(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l},c097:function(t,n){t.exports=e},f6fd:function(e,t){(function(e){var t="currentScript",n=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(o){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(o.stack)||[!1])[1];for(e in n)if(n[e].src==t||"interactive"==n[e].readyState)return n[e];return null}}})})(document)},fb15:function(e,t,n){"use strict";var o;(n.r(t),"undefined"!==typeof window)&&(n("f6fd"),(o=window.document.currentScript)&&(o=o.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=o[1]));var r=n("ba10"),i=n("c097");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function a(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?d(e):t}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(e){var n;return c(this,t),n=a(this,f(t).call(this)),v(d(n),"_onUserLoaded",function(e){n.isLoggedIn=!0,n.emit("userLoaded",e)}),v(d(n),"_onUserUnloaded",function(){n.isLoggedIn=!1,n.emit("userUnloaded")}),v(d(n),"_onSilentRenewalError",function(e){return n.emit("renewalError",e)}),v(d(n),"_onUserSignedOut",function(){return n.emit("userLoggedOut")}),v(d(n),"_onSessionChanged",function(e){return n.emit("sessionChanged",e)}),n.options=e,n.isLoggedIn=!1,n._client=new i.UserManager(Object.assign({userStore:new i.WebStorageStateStore,loadUserInfo:!0},e)),n._client.events.addUserLoaded(n._onUserLoaded),n._client.events.addUserUnloaded(n._onUserUnloaded),n._client.events.addSilentRenewError(n._onSilentRenewalError),n._client.events.addUserSignedOut(n._onUserSignedOut),n._client.events.addUserSessionChanged(n._onSessionChanged),n}return p(t,e),l(t,[{key:"destroy",value:function(){this._client.events.removeUserLoaded(this._onUserLoaded),this._client.events.removeUserUnloaded(this._onUserUnloaded),this._client.events.removeSilentRenewError(this._onSilentRenewalError),this._client.events.removeUserSignedOut(this._onUserSignedOut),this._client.events.removeUserSessionChanged(this._onSessionChanged)}},{key:"login",value:function(){return this.options.popup?this._client.signinPopup():this._client.signinRedirect()}},{key:"handleLoginCallback",value:function(){return this.options.popup?this._client.signinPopupCallback():this._client.signinRedirectCallback()}},{key:"logout",value:function(e){return this.options.popup?this._client.signoutPopup(e):this._client.signoutRedirect(e)}},{key:"handleLogoutCallback",value:function(){return this.options.popup?this._client.signoutPopupCallback():this._client.signoutRedirectCallback()}},{key:"loginSilentCallback",value:function(){return this._client.signinSilentCallback()}},{key:"querySessionStatus",value:function(){return this._client.querySessionStatus()}},{key:"getUser",value:function(){return this._client.getUser()}},{key:"silentSignin",value:function(){return this._client.silentSignin()}}]),t}(r),g="idvpn-login-button",_={minWidth:"100px",color:"white",background:"#1976d2",textTransform:"uppercase",textDecoration:"none",display:"inline-block",padding:"7px",borderRadius:"2px",border:"none"},b=function(e,t){while(e.firstChild)e.removeChild(e.firstChild);var n=document.createTextNode(t?"Logout":"IdVPN Login");e.appendChild(n)},m=function(e){if(!e.client)throw new Error("client missing");e.client.destroy(),e.client=null},w=function(e){var t=e.client||new y(e),n=document.createElement("BUTTON");for(var o in n.id=g,_)n.style[o]=_[o];return n.client=t,n.addEventListener("click",function(){return t.isLoggedIn?t.logout():t.login()}),b(n,t.isLoggedIn),t.on("userLoaded",function(o){b(n,t.isLoggedIn),!e.onLogin||e.onLogin(o)}),t.on("userUnloaded",function(){b(n,t.isLoggedIn),!e.onLogout||e.onLogout()}),n.destroy=function(){return m(n)},n},S={createButton:w,Client:y};t["default"]=S}})["default"]});
//# sourceMappingURL=idvpn.umd.min.js.map